/**
 * @fileoverview The triggers file contains all activation conditions for the experiment.
 * This is the first file to be evaluated.
 */
import activate from './lib/experiment';
import { getCookie, pollerLite } from '../../../../lib/utils';

const ieChecks = /MSIE|Trident|Edge\/(12|13|14|15|16|17|18)/.test(window.navigator.userAgent);

if(!ieChecks) {
  if(!getCookie('Synthetic_Testing')) {
    pollerLite([
      'body',
      () => {
        if (document.querySelector('#estore_productpage_template_container') && document.querySelector("#productPageAdd2Cart")){
          return true;
        }
        else if (document.querySelector('#basket_container') && document.querySelector('#basket_adcard') && document.getElementById('basket_widget_right_bar')) {
          return true;
        }
      },
      () => {
        return !window.location.href.match(/.*(10006425|10006435|10006579|10006584|10006593|10007100|10007975|10008116|10016724|10021862|10021938|10023682|10023901|10023902|10028295|10028429|10028545|10028643|10029445|10030025|10032788|10032792|10032794|10032828|10032857|10032858|10032863|10032867|10032871|10032878|10032880|10032884|10032886|10032889|10032893|10032902|10032919|10032951|10032960|10032973|10033016|10033019|10033035|10033041|10033042|10033132|10033142|10033180|10033180|10033183|10033186|10033189|10033190|10033191|10033194|10033237|10033239|10033242|10033252|10033263|10033265|10033269|10033573|10034663|10034695|10034848|10041265|10041621|10042859|10043827|10043981|10049505|10049839|10049857|10057307|10059363|10059363|10059366|10059862|10060258|10062091|10063819|10064412|10064415|10064504|10067529|10067616|10067621|10067623|10067630|10067664|10067672|10067844|10067975|10068056|10068980|10068984|10068990|10068996|10069272|10069288|10069320|10072197|10072762|10073482|10073483|10074963|10075051|10075156|10075291|10075297|10076471|10077435|10080062|10080995|10081052|10081059|10081064|10081084|10081085|10081086|10081101|10083266|10083358|10083541|10083656|10084607|10084615|10084647|10085015|10086419|10086423|10086427|10086471|10086568|10087220|10087583|10089093|10093685|10094187|10094390|10095625|10097393|10098073|10099815|10101017|10102097|10102098|10102125|10102126|10102127|10102427|10102952|10103149|10103218|10103591|10114906|10114927|10115201|10115823|10115825|10116833|10120750|10120823|10120825|10122128|10125674|10130288|10132928|10132939|10138353|10138356|10138358|10140488|10140503|10146982|10148542|10149468|10149470|10149475|10154388|10154732|10154736|10155631|10155640|10155641|10155642|10155643|10155814|10155815|10160712|10160718|10164577|10164623|10164891|10165163|10166107|10168105|10168106|10168107|10172603|10173500|10173502|10173504|10173525|10174101|10174103|10174509|10175040|10175041|10175041|10177009|10178752|10181531|10181698|10181700|10182370|10183207|10184127|10186843|10187568|10187571|10188530|10188568|10188577|10188614|10190118|10190758|10190759|10191782|10191783|10191787|10191788|10191789|10191791|10193530|10193637|10198210|10201069|10201072|10204711|10205095|10206819|10208232|10209693|10210897|10210936|10212220|10212221|10212610|10212613|10213193|10223173|10224880|10224883|10228620|10230700|10231540|10231541|10235039|10236971|10238084|10238085|10239745|10246045|10246072|10247496|10248498|10248501|10248502|10248503|10248504|10248505|10248506|10248826|10248837|10250364|10252901|10253365|10254395|10255669|10255675|10255676|10257921|10258146|10258314|10258315|10258316|10258317|10258318|10258319|10258320|10258321|10258322|10258510|10258511|10258512|10261069|10261510|10261514|10262217|10262219|10262525|10263817|10263818|10263964|10264040|10264098|10264101|10264226|10264279|10265945|10265946|10266248|10266249|10266250|10266251|10266252|10266253|10266254|10266255|10266256|10266257|10266258|10266259|10266260|10266261|10266363|10266365|10266903|10266904|10266905|10266906|10266907|10266908|10266909|10266910|10266911|10266912|10266913|10266914|10266916|10266917|10267035|10267247|10267906|10267925|10267989|10269383|10269384|10269385|10269743|10269744|10271191|10272130|10272131|10272132|10272292|10272437|10272438|10272439|10272440|10272441|10272442|10272443|10273741|10273785|10273786|10273787|10273788|10273789|10273790|10274929|10274930|10274931|10274932|10274933|10274934|10274935|10274936|10274937|10274938|10274939|10274940|10274941|10275006|10275007|10275008|10275531|10275733|10276368|10276369|10276642|10276643|10276644|10276653|10276654|10276655|10276656|10276657|10276658|10276660|10276661|10276662|10276663|10276841).*/);
      },    
    ], activate);
  }
}

/**
 * @fileoverview The triggers file contains all activation conditions for the experiment.
 * This is the first file to be evaluated.
 */
import activate from './lib/experiment';
import { getCookie, pollerLite } from '../../../../lib/utils';

const ieChecks = /MSIE|Trident|Edge\/(12|13|14|15|16|17|18)/.test(window.navigator.userAgent);
const PLPexclusions = /.*(www.boots.com).*((\/)(opticians)|(\/)health-pharmacy(\/)pharmacy-medicines|(\/)health-pharmacy(\/)pharmacy-medicines(\/)travel-pharmacy-medicines|(\/)health-pharmacy(\/)pharmacy-medicines(\/)sexual-health-pharmacy-medicines|(\/)health-pharmacy(\/)pharmacy-medicines(\/)lifestyle-pharmacy-medicines|(\/)health-pharmacy(\/)medicines-treatments(\/)eye-care|(\/)health-pharmacy(\/)medicines-treatments(\/)painrelief(\/)all-painrelief|(\/)health-pharmacy(\/)medicines-treatments(\/)painrelief(\/)Paracetamol|(\/)health-pharmacy(\/)medicines-treatments(\/)painrelief(\/)ibuprofen-tablets|(\/)health-pharmacy(\/)medicines-treatments(\/)painrelief(\/)aspirin-tablets|(\/)health-pharmacy(\/)medicines-treatments(\/)painrelief(\/)migraine-tablets|(\/)health-pharmacy(\/)medicines-treatments(\/)painrelief(\/)period-pain-tablets|(\/)health-pharmacy(\/)medicines-treatments(\/)painrelief(\/)muscle-joint-pain|(\/)health-pharmacy(\/)medicines-treatments(\/)footcare(\/)athletes-foot|(\/)health-pharmacy(\/)medicines-treatments(\/)footcare(\/)fungal-nail-infection|(\/)health-pharmacy(\/)medicines-treatments(\/)footcare(\/)warts-verrucas|(\/)health-pharmacy(\/)medicines-treatments(\/)cold-flu-medication|(\/)baby-child(\/)baby-child-health(\/)fever-pain-relief|(\/)baby-child(\/)baby-child-health(\/)child-cough-cold-flu|(\/)baby-child(\/)baby-child-health(\/)teething|(\/)baby-child(\/)baby-child-health(\/)nits-lice-worms|(\/)health-pharmacy(\/)vitaminsandsupplements(\/)cannabidiol-cbd-oil|(\/)health-pharmacy(\/)electrical-health-diagnostics(\/)dna-test-kits|(\/)health-pharmacy(\/)medicines-treatments(\/)allergy-hayfever|(\/)health-pharmacy(\/)travel-health(\/)antimalarials|(\/)health-pharmacy(\/)travel-health(\/)travel-sickness|(\/)baby-child(\/)babyfeeding(\/)baby-milk-formula|(\/)aptamil(\/)aptamil-full-range|(\/)aptamil(\/)aptamil-specialist-milks|(\/)aptamil(\/)aptamil-milks|(\/)aptamil(\/)pronutura|(\/)aptamil(\/)profutura|(\/)cow-gate(\/)cow-gate-full-range|(\/)cow-gate(\/)cow-gate-milks|(\/)hipp(\/)hipp-milks|(\/)hipp(\/)hipp-full-range|(\/)sma(\/)sma-feeding-issues|(\/)sma(\/)sma-organic|(\/)sma(\/)sma-specialist-milks|(\/)sma(\/)all-sma-milks|(\/)sma(\/)sma-0-6-months).*/;
const PDPexclusions = /(.*(www.boots.com).*(-)(10033180|10059363p|10080995p|10086423p|10205095p|10257921p|10258146p|10269743p|10269744p|10276368p|10276579p|10279757p|10287082p|10288700p|10298711p|10318309p|10318310p|10318311p|10318312p|10318313p|10318314p|10059363p|10006425|10006435|10006579|10006584|10006593|10007100|10007975|10008116|10015845|10016269|10016724|10021862|10021938|10023682|10023763|10023901|10023902|10028295|10028429|10028545|10028643|10029445|10030025|10032788|10032792|10032794|10032828|10032857|10032858|10032863|10032867|10032871|10032878|10032880|10032884|10032886|10032889|10032893|10032902|10032919|10032951|10032960|10032973|10033016|10033019|10033020|10033028|10033035|10033041|10033042|10033132|10033142|10033180|10033183|10033186|10033188|10033189|10033190|10033191|10033194|10033237|10033239|10033242|10033252|10033263|10033265|10033269|10033573|10034663|10034695|10034848|10041265|10041621|10042859|10043827|10043981|10049505|10049839|10049857|10057307|10059366|10059862|10060258|10062091|10063819|10064412|10064415|10064504|10067529|10067616|10067621|10067623|10067630|10067664|10067672|10067844|10067975|10068056|10068980|10068984|10068990|10068996|10069272|10069288|10069320|10072197|10072762|10073482|10073483|10074963|10075051|10075098|10075156|10075291|10075297|10076471|10077435|10080062|10081052|10081059|10081064|10081084|10081085|10081086|10081101|10083011|10083266|10083358|10083541|10083656|10084607|10084615|10084647|10085015|10086419|10086427|10086471|10086568|10087220|10087583|10089093|10093685|10094187|10094390|10095625|10097393|10098073|10099812|10099815|10101017|10102097|10102098|10102125|10102125|10102126|10102126|10102127|10102427|10102952|10103149|10103218|10103591|10114906|10114927|10115201|10115823|10115825|10116833|10120750|10120823|10120825|10122128|10125674|10130141|10130288|10132928|10132939|10138353|10138356|10138358|10140488|10140503|10140503|10146982|10148542|10149468|10149470|10149475|10154388|10154732|10154736|10155631|10155631|10155640|10155640|10155641|10155642|10155642|10155643|10155814|10155815|10160712|10160718|10164577|10164623|10164891|10165163|10166107|10168105|10168106|10168107|10170370|10172603|10173500|10173502|10173504|10173525|10174101|10174103|10174509|10175040|10175040|10175041|10175041|10175041|10177009|10178752|10181531|10181698|10181700|10182370|10183207|10184127|10185545|10186324|10186843|10187568|10187571|10188530|10188568|10188577|10188614|10190118|10190118|10190758|10190759|10191782|10191783|10191787|10191788|10191789|10191791|10193530|10193637|10198210|10198210|10201069|10201072|10204711|10206819|10208232|10209693|10210897|10210936|10212220|10212221|10212610|10212613|10213193|10213193|10223173|10224880|10224883|10228620|10230700|10231540|10231540|10231541|10231541|10235039|10236971|10238084|10238085|10239745|10246045|10246072|10247496|10248498|10248498|10248501|10248501|10248502|10248502|10248503|10248503|10248504|10248504|10248505|10248505|10248506|10248506|10248826|10248837|10248837|10250364|10252901|10253365|10254395|10255669|10255675|10255676|10258314|10258315|10258316|10258317|10258318|10258319|10258320|10258321|10258322|10258510|10258511|10258512|10261069|10261510|10261514|10262217|10262219|10262525|10263817|10263818|10263964|10264040|10264098|10264101|10264226|10264279|10265945|10265945|10265946|10265946|10266248|10266249|10266250|10266251|10266252|10266253|10266254|10266255|10266256|10266257|10266258|10266259|10266260|10266261|10266363|10266365p|10266903|10266904|10266905|10266906|10266907|10266908|10266909|10266910|10266911|10266912|10266913|10266914|10266916|10266917|10267035|10267247|10267375|10267906|10267925|10267989|10269383|10269384|10269385|10271191|10272130|10272131|10272132|10272292|10272437|10272438|10272439|10272440|10272441|10272442p|10272443|10272974|10273741|10273785|10273786|10273787|10273788|10273789|10273790|10274929|10274930|10274931|10274932|10274933|10274934|10274935|10274936|10274937|10274938|10274939|10274940|10274941|10275006|10275007|10275008|10275531|10275733|10276369|10276642|10276643|10276644|10276653|10276654|10276655|10276656|10276657|10276658|10276660|10276661|10276662|10276663|10276841|10276844|10277056|10277056|10277057|10277057|10277058|10277058|10277060|10277065|10277133|10277223|10277223|10277459|10277523|10277524|10277525|10277526|10277527|10277786|10277941|10278613|10278818|10279512|10279757|10279790|10279791|10279878|10279878|10279879|10279879|10280453|10280527|10280689|10280692|10280802|10280907|10280908|10280909|10280910|10280991|10281157|10281161|10281567|10281922|10282700|10282701|10286547|10286657|10287058|10287059|10287060|10287061|10287062|10287063|10287064|10287449|10287830|10288392|10288393|10288394|10288395|10288396|10288397|10288400|10288401|10288403|10288404|10288406|10288407|10288408|10288409|10288453|10288456|10288457|10288461|10288465|10288466|10288469|10288470|10288723|10288724|10288958|10288960|10288962|10288964|10288966|10288970|10289049|10289583|10289683|10289962|10290160|10292573|10292578|10292676|10292748|10292822|10293558|10293665|10293666|10293667|10294135|10294811|10294814|10294865|10294866|10295054|10295098|10297347|10297350|10297642|10297643|10297644|10298710|10300181|10300182|10300512|10302001|10302002|10302003|10303690|10305652|10305653|10307207|10308251|10308253|10308657|10308658|10308944|10311751|10311752|10311753|10311754|10315057|10315058|10315059|10315060|10315061|10316354|10316357|10316358|10316460))|.*(www.boots.com).*(-)((10292772|10320685|10319643|10320684|10319640|10319642|10321447|10321445|10320686|10321443|10321442|10319350|10321444|10319368|10320664|10319351|10313937|10319349|10319348|10313935|10313945|10313944|10313943|10313942|10313941|10313940|10313939|10313938|10313936|10313931|10313932|10313934|10320665|10320666|10320667|10319644|10320660|10320662|10320663|10320683|10320682|10320680|10320681|10320679|10320678|10320677|10320675|10320674|10320673|10320672|10320671|10320670|10320669|10320668|10320661|10320676|10319379|10319380|10319407|10319405|10319426|10319428|10319639|10319403|10319433|10319432|10319431|10319430|10319408|10319427|10319409|10319423|10319421|10319422|10319420|10319425|10319424|10319429|10319419|10319417|10319416|10319415|10319414|10319406|10319413|10319412|10319411|10319410|10319418|10319404|10319358|10319402|10319390|10319400|10319399|10319398|10319397|10319396|10319395|10319393|10319401|10319394|10319391|10319389|10319378|10319388|10319387|10319386|10319385|10319384|10319383|10319382|10319381|10319392|10319377|10319353|10319363|10319374|10319373|10319372|10319371|10319370|10319369|10319367|10319366|10319375|10319365|10319364|10319362|10319376|10319361|10319360|10319359|10319357|10319356|10319352|10319355|10319354|10319641|10313933|10313930|10312274|10312273|10312272|10312271|10312270|10312267|10312266|10312276|10313904|10312261|10313905|10303559|10303558|10313906|10313909|10312243|10311541|10312241|10311550|10311549|10311548|10311547|10311546|10311545|10311544|10311543|10311542|10313908|10312258|10313918|10313917|10313916|10313915|10313914|10313913|10313912|10313911|10313910|10313907|10312259|10312260|10312244|10303557|10307349|10307348|10307346|10307345|10307344|10307343|10307342|10307340|10307339|10307402|10307883|10307881|10307880|10307877|10307878|10307876|10307874|10307873|10307872|10307871|10307869|10307347|10307884|10307882|10307169|10303556|10303555|10303553|10303552|10303361|10307885|10307866|10307867|10307868|10307870|10307887|10307886|10307865|10312245|10312246|10312247|10298827|10298826|10298825|10298824|10298823|10298822|10298821|10298820|10298819|10298818|10298817|10298816|10298833|10298832|10298831|10298830|10298829|10298828|10298834|10301437|10301436|10301435|10301434|10298835|10298815|10298864|10298850|10298849|10298848|10298847|10298846|10298845|10298844|10298843|10298842|10298841|10298863|10298865|10298878|10298884|10298882|10298883|10298881|10298880|10298851|10298854|10313922|10313920|10298852|10298862|10298861|10298860|10298859|10298858|10298857|10298856|10298855|10298853|10298836|10298879|10298839|10298838|10298837|10298813|10298812|10298814|10298877|10298866|10298876|10298875|10298874|10298873|10298872|10298871|10298870|10298869|10298868|10298867|10298840|10294719|10294718|10294717|10294716|10294715|10294714|10294713|10294712|10294711|10294710|10295553|10295554|10295565|10295564|10295563|10295562|10295561|10295560|10295559|10295558|10295557|10295556|10297037|10297036|10297035|10295555|10312242|10312257|10312252|10312251|10312250|10312249|10312248|10313919|10295566|10295568|10292783|10292794|10292793|10292792|10292790|10292789|10292788|10292787|10292786|10292785|10292784|10292782|10292781|10292780|10292779|10292777|10292778|10292776|10292775|10292774|10292807|10292806|10292805|10292804|10292802|10292801|10292800|10292799|10294709|10295567|10295573|10295572|10295571|10295570|10295569|10292808|10292809|10292810|10292773|10292795|10292796|10292797|10292798|10292811|10149041|10313953|10313921|10313952|10313950|10313951|10313949|10313948|10319338|10319340|10319341|10319342|10319343|10319344|10319345|10319346|10319347|10319337|10319335|10319336|10319339|10313947|10313928|10313946|10313929|10313925|10313923|10313926|10313924)(p)?)|(.*(www.boots.com).*((\/)bazuka-gel-5g|(\/)vype-eliquid-blended-tobacco12mg|(\/)covonia-original-bronchial-balsam-150ml|(\/)nurofen-for-children-100mg-chewable-capsules-7-years-plus|(\/)nurofen-express-400-mg-liquid-capsules-10-capsules|(\/)boots-pharmaceuticals-ultra-cold-flu-relief-all-in-one-16-capsules|(\/)vype-3-epen-cartridges-golden-tobacco-18mg|(\/)boots-pharmaceuticals-anaesthetic-sore-throat-relief-spray|(\/)vype-10ml-eliquid-crisp-mint-12mg|(\/)Vype-ePen-starter-kit-black|(\/)nurofen-joint-muscular-pain-relief-200mg-medicated-plaster---4-x-medicated-plasters-|(\/)opticrom-allergy-single-dose-2-percent-wv-eye-drops-20-single-doses|(\/)aptamil-1-first-milk-liquid-ready-to-feed-formula-1-litre|(\/)aptamil-1-first-milk-liquid-ready-to-feed-formula-1-litre|(\/)daktarin-sugar-free-2-percent-oral-gel-15g|(\/)orajel-extra-strength-dental-gel-53g|(\/)nurofen-200mg-tablets-16-tablets|(\/)stugeron-15-tablets))/gmi;


if(!ieChecks) {
  if(!getCookie('Synthetic_Testing')) {
    pollerLite([
      'body',
      () => {
        if(document.querySelector('.product_listing_container')) {
            if (!window.location.href.match(PLPexclusions)) {
            return true;
            }
        }
        else if (document.getElementById('estore_productpage_template_container')){
          if (!window.location.href.match(PDPexclusions)) {
            return true;
        }
    }
    }
    ], activate);
  }
}
import { myHomeServeData } from '../data/myHomeServeData';
import { accordion } from './componentUtils';

const userIcon = `<svg xmlns="http://www.w3.org/2000/svg" width="37" height="37" viewBox="0 0 37 37" fill="none">
<path d="M15.6875 1.12235C8.98066 2.26545 3.61867 6.82028 1.48785 13.1865C0.963875 14.7517 0.509766 17.4072 0.509766 18.8844C0.509766 20.3617 0.963875 23.0172 1.48785 24.5824C4.71901 34.2724 15.3557 39.3196 24.8046 35.6617C28.8392 34.0965 32.4197 30.8255 34.3759 26.9389C35.5111 24.6703 36.3146 21.3113 36.3146 18.8844C36.3146 16.2992 35.4762 12.9755 34.2012 10.531C30.6906 3.77787 23.0231 -0.12627 15.6875 1.12235ZM22.3245 2.79304C27.5468 4.05925 31.9831 8.0689 33.8519 13.2041C34.6378 15.332 34.8125 16.352 34.795 18.8844C34.795 20.9948 34.7426 21.5927 34.3409 23.0524C33.8344 24.8989 32.9786 26.763 31.9307 28.293C31.1971 29.3482 30.6207 30.0517 30.4985 30.0517C30.4635 30.0517 30.3238 29.5768 30.219 28.9965C29.9046 27.4137 28.6471 25.0396 27.3721 23.6327C26.132 22.2786 24.1759 20.9068 22.831 20.4496L21.9402 20.1506L22.4468 19.7989C24.6998 18.1986 25.9923 15.1913 25.5207 12.6237C25.1015 10.3375 23.7567 8.42063 21.8529 7.40063C17.3817 5.02649 12.2293 7.59408 11.3036 12.6237C10.832 15.1913 12.1245 18.1986 14.3776 19.7989L14.8841 20.1506L13.9759 20.4672C12.6659 20.8893 10.6574 22.3137 9.45223 23.6503C8.02004 25.2155 6.88477 27.4489 6.53545 29.3834C6.46559 29.7527 6.37826 30.0517 6.32586 30.0517C6.04641 30.0517 4.40463 27.6775 3.67107 26.2355C2.4834 23.8261 2.02929 21.8917 2.01182 19.0603C2.01182 16.053 2.46593 13.9427 3.6536 11.5686C6.16867 6.57408 10.7971 3.21511 16.3163 2.44131C17.8183 2.23028 20.6303 2.38856 22.3245 2.79304ZM20.805 8.47339C22.045 9.03614 23.0231 10.021 23.6694 11.3399C24.106 12.2192 24.1759 12.5886 24.1584 13.7844C24.1584 15.5958 23.617 16.8092 22.2546 18.0579C21.1019 19.113 20.0889 19.4999 18.4122 19.4999C16.7355 19.4999 15.7224 19.113 14.5697 18.0579C12.369 16.0355 11.9848 13.081 13.5916 10.5837C15.1461 8.15683 18.1851 7.25994 20.805 8.47339ZM22.2546 21.751C25.7478 23.1579 28.1581 26.0596 28.944 29.8406C29.2759 31.4937 29.2933 31.4761 27.7039 32.5489C26.1844 33.5865 24.0012 34.5713 22.2372 35.011C19.9492 35.5737 16.5957 35.5386 14.2902 34.923C12.5262 34.4482 10.6399 33.5865 9.06798 32.5137C7.54846 31.4761 7.54846 31.4761 7.88031 29.8406C8.7536 25.6199 11.6355 22.5072 15.7748 21.3289C16.3861 21.1706 17.3118 21.1003 18.7615 21.1355C20.6303 21.1882 21.0146 21.2586 22.2546 21.751Z" fill="#E62419"/>
</svg>`;

const myHomeServe = (id) => {
  const signInOutUrl = window.isLoggedIn ? '/uk/account/B2C-logout?logout=show' : '/uk/loggedin/my-homeserve';
  const signInOutText = window.isLoggedIn ? 'Log out' : 'Log in';
  console.log('ðŸš€ ~ myHomeServe ~ signInOutText:', signInOutText);

  const htmlStr = `<div class='${id}_myHomeServe'>
        <div class='${id}_myHomeServe-dropdown'>
            ${
              window.isLoggedIn
                ? `
            <div class='${id}_myHomeServe-content'>
              <p class="${id}_myHomeServe-title">MyHomeServe</p>
              <p class="${id}_myHomeServe-profile">${userIcon}</p>
              <span class="${id}_myHomeServe-icon">${accordion}</span>
            </div>
            `
                : ''
            }

            <div class="${id}_btnWrapper">
              <a href="/uk/loggedin/claims-proxy" class="btn ${id}_makeAClaimBtn" id="make_a_claim_button">
                Make a claim
              </a>
              <a href="${signInOutUrl}" class="btn ${id}_loginBtn" id="login_button">
                  ${signInOutText}
              </a>
            </div>
        </div>
        ${
          window.isLoggedIn
            ? `
        <ul class="${id}_myHomeServe-list">
            ${myHomeServeData
              ?.map((item) => {
                return `<li class="${id}_myHomeServe-item">
                    <a href="${item.url}" class="${id}_myHomeServe-link">${item.title}</a>
                </li>`;
              })
              .join('')}
        </ul>
        `
            : ''
        }
    </div>`;
  return htmlStr;
};
export default myHomeServe;

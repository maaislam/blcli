import shared from '../shared';

const { ID } = shared;

export default class ProductUSPs {
  constructor() {
    this.create();
    this.bindEvents();
    this.render();
  }

  create() {

    const brandName = window.digitalData.product[0].productInfo.brand;
  
    // get the guarantees
    let guarantee;
  
   const twoYearProducts = ['1075772','1075799','1075829','1958011','1958062','2346796','1958097','2346931','2469561','2469677','2378701','2179709','2469499','2469642','2469758','1031562','1075802','1075810','2346761','1031678','1075837','2469596','1132776','2469537','2469707','2469723','2469367','2469626','1958070','3477177','3507904','1075780','1132679','1132695','1958038','2180049','3479196','3477770','2148943','2180030','3692973','2469421','2469456','2469472','2469588','2469685','4264452','2469448','2469480','2469529','2469545','3834913','2469391','2469502','2469650','2469766','2469553','2469774','2972840','4611756','4611888','4307151','4307216','4307232','4797582','4307224','4443322','4445880','4445996','2469618','4943155',
      '4943171','4433602','4446003','4943163','3478971','3479153','3479307','5009480','4611918','4612000','4612035','4590597','5008786','4797574','4900545','3834905','5008921','5009138','5008956','5009022','5008948','5009367','5008875','3476987','4307194','4307208','4307240','4307259','4307267','4307143','5430658','6211615','4611721','4611241','4611993','4611985','4611829','4716973','5818338','4590600','4611977','6252281','4943201','6252354','4900553','5009006','5008727','5009529','5008883','5009014','5009510','5446686','4943198','5446694','5008794','5008867','5820812','9232214','9306498','6956246','6956262','6956289','6956564','9232109','9232125','6756719','6956149','6956300','6956335','6956386','6956416',
      '6956238','6956254','6956270','6252346','8015880','9227369','9232192','8617295','6956130','6956173','6956548','6252273','6252303','6252370','6378951','6956165','6956319','8017875','9227377','9231641','6956203','6956521','9735178','9227342','9232206','9232141','6956211','6956572','8559430','9227385','9232117','9232133','6956424','6956459','9227334','9227350','9231730','1128787','1128973','1591320','1128795','2188228','1590871','2190516','2465574','2465590','2466015','2465914','2465167','2923513','1128760','2465159','2465930','2465582','2923459','1485709','1591584','2923483','1591037','1521802','3146537','1128744','2190486','3395944','3545946','2340259','2465957','2466007','2466066','2466082','2465744',
      '2612194','2465752','2465531','2465558','2465922','2466074','2923688','2923467','2923475','2923491','2923521','2923769','2923432','2923750','4303954','2465515','2465906','2465949','2465981','3545954','4909585','5516609','5257220','3518442','4614410','5257212','8560773','9304193','9305114','8561346','8561419','8561036','8561338','8559961','8561400','9304320','8561311','8561354','8561370','9304215','9304258','8560722','8561389','8561362','9304223','9304266','9304282','8561303','9304304','9305106','9304207','8561397','9304231','9304274','9304312','9552022']

    const threeYearProducts = ['1300954', '1301004'];
    const fiveYearProducts = ['1121197','1121219','1128655','1128639','1128671','1128698','1128930','2188147','2465388','2465221','2465507','1128612','1128965','2923378',
    '1128620','1128736','2465418','2465183','2465434','2465450','2465485',
    '1122533','1128914','2465191','2465361','2465442','2465493','2923386','1128701','1128728','2181460','2186551','2394111','2465205','2465396','2466023','2465175','2465426','2465965','2466031','2465477','2923416','2923408','2923394','2465213','2466058','3132706','2923351','4909593','8559899','8564965','8950237','9303871','9304800','6955134','9303847','9243283','6955150','8559848','9303820','9304177','9304428','9304509','9304797','6955363','8561494','9304738','9303936','9304185','6955177','9303863','6955207','8559953','9303944','1064401','1064460','1064428','1064479','1064347','1064363','1064444','1064495','1077198','1185896','1954490','2243121','2243113','2243229','1954520','1769383','1954482','2178249',
    '2467151','2467712','2467739','2467011','2467445','2467488','2467704','2467747','1064339','1064355','1077228','2243717','2243733','2467224','2467240','2467623','2467674','1064398','1064452','1064371','1064436','1064487','2467291','2467658','2467690','2467852','2467259','2523442','3307689','3309177','1631128','3307379','3307522','3307581','3450171','3450732','1064509','3307425','3307174','3307794','3308111','3308146','3308162','3307778','3307506','3307301','3307751','3308138','3308235','3309223','3451186','3450953','3450805','3450694','3451194','2467186','2467461','2467720','2467836','2467267','2467801','2467208','2467860','2467178','2467194','2467232','2467283','2467666','2467682','3306984','3307166',
    '3307182','3307417','3308154','3308170','3308219','3307131','3307204','3308197','2467437','2467453','2467755','2467844','3306992','3307344','3307360','3309282','3450775','3451089','3307271','3307557','4981243','4981359','4981618','3307336','3307719','3307786','4981308','4981510','4981626','3450961','3451011','3598845','3450406','3450740','4981413','4981448','4981499','4981596','5297753','4981421','4981472','4981588','3307387','3307573','3308200','3309193','4981235','4981383','3451208','4346130','4346149','4415671','4415930','4415922','6050913','4981324','4981367','4981340','4981405','4981537','4981332','4981480','4981316','4981375','4981502','4981634','4981677','4981456','5297788','4981391','4981545',
    '4981650','5724244','5297761','6050921','6050905','6371469','6939929','6940099','9176462','9176543','9176829','9178333','6940145','8588929','6939635','6939937','6940110','9178562','9178635','6939872','6940005','6940021','6940188','6940242','9176470','9176500','9176519','9176535','9176551','9176969','9178341','9178589','6939651','6939783','6940153','6939899','6940013','9176756','9178201','9178376','9178619','9178066','6939600','6939775','6939902','6939945','6939961','6940102','6940161','6940234','8588902','6939821','6939856','6939805','9177159','9178627','6939627','6939643','6939759','6939791','6940129','6940218','8588910','9176586','9176837','9176853','9177337','9178058','9178090','8588872','9178074',
    '9178139','9178104','9178570','9178597','6939619','6940137','6940196','6939848','6939880','6939996','6940048','8588899','9176578','9176594',
    '9178082','9178600'];
    const SKU = window.digitalData.product[0].productInfo.productID;

    if(twoYearProducts.indexOf(SKU) > -1) {
      guarantee = '2';
    } else if (threeYearProducts.indexOf(SKU) > -1) {
      guarantee = '3';
    } else if (fiveYearProducts.indexOf(SKU) > -1) {
      guarantee = '5';
    }
 
    const actualDate = document.getElementById('js-update-delivery').innerText.replace(/(,)(\s).+/, '').trim();

    const usps = {
        // delivery: {
        //   title: 'Free Express Delivery.',
        //   icon: 'https://service.maxymiser.net/cm/images-us/1/1/2/E2EED08A0505D5E2964F04E4BB438A800D5F014C2F3E23CED1251537DFBE8396/ernestjones-co-uk/EJ034---PDP-Service-Messaging---Prestige-Watches/noun_ExpressDelivery_1559182.png',
        //   content: `Tracked delivery on ` + actualDate + ` when you order in <span class="${ID}-countdown"></span>`,
        // },
        returns: {
          title: 'Extended Returns.',
          icon: 'https://service.maxymiser.net/cm/images-us/1/1/2/400D5EB1EDB04C176C52D7DA49AD5DA88029BFE00FE586BEDD3BB63CC4DDA039/ernestjones-co-uk/EJ034---PDP-Service-Messaging---Prestige-Watches/noun_Refund_1544357.png',
          content: 'Returns have been extended until 30 days after stores re-open.'
        },
        guaranteeYear: {
          title: `${guarantee} Year Warranty.`,
          icon: 'https://service.maxymiser.net/cm/images-us/1/1/2/5BA53296368F77DA94FF6A6AD2600C7897EB2AA97DCE2548EC941B552FB8F8F8/ernestjones-co-uk/EJ034---PDP-Service-Messaging---Prestige-Watches/noun_warranty_85329.png',
          content: `On all <span class="${ID}-brand">${brandName}</span> products.`,
        }
    }
    
    const element = document.createElement('div');
    element.classList.add(`${ID}_usp_Wrapper`);
  
    
    Object.keys(usps).forEach((i) => {
        const uspContent = document.createElement('div');
        uspContent.classList.add(`${ID}-usp`);
        uspContent.innerHTML = `
        <div class="${ID}-icon"style="background-image: url(${usps[i].icon})"></div>
        <p>
          <span class="${ID}-uspPoint">${usps[i].title}</span>
          ${usps[i].content}
        </p>`;

        element.appendChild(uspContent);
    });


    this.component = element;
  }

  bindEvents() {
    const { component } = this;
  }

  render() {
    const { component } = this;
    if(window.innerWidth > 767) {
      const form = document.querySelector('#basketForm');
      form.insertAdjacentElement('beforebegin', component);
    } else {
      const productDetails = document.querySelector('.detail-page__right-column');
      productDetails.appendChild(component);
    } 
    
  }
}
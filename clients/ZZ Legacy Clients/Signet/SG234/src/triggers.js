import activate from "./lib/experiment";
import { pollerLite } from "../../../../lib/uc-lib";
import shared from "../../../../core-files/shared";

const ieChecks = /MSIE|Trident|Edge\/(12|13|14|15|16|17|18)/.test(window.navigator.userAgent);

if (!ieChecks) {
  if (!document.documentElement.classList.contains(`${shared.ID}`)) {
    if (window.location.href.indexOf("webstore/l/") > -1) {
      pollerLite(["body", ".product-card", ".products.products-display--grid", "[data-insights-object-id]"], activate);
    } else {
      pollerLite(
        [
          "body",
          ".product-gallery__main",
          () => {
            if (
              window.location.href.match(
                /webstore\/d\/.*(4645758|3791424|2607182|2606658|3909441|2607573|5316960|1677861|1114220|3332403|5514983|5514738|4229614|1678558|3151425|5929113|8078483|6374557|5070880|5085454|1688103|3826139|2504928|1112856|6914551|4229436|5316308|1678132|1677152|5073294|5514851|4645200|3150976|8080488|3151239|1679783|1677349|8370648|6910246|1113003|1676997|1677489|2183471|5313783|6914160|2184214|3781801|3974839|2182106|5080789|8080283|8079153|1678418|5071445|1678000|1688278|2847701|1113194|3974987|5514320|3974391|4640160|5929628|3885968|6914438|5313295|5316073|5340098|2606380|3970566|1678817|2849011|3152758|3153576|2606917|8369968|2607050|2607441|3151557|4498917|4645480|4646010|4799879|4800001|5317371|2607328|2846462|2849143|2849275|2885743|3041670|3051889|3152332|3423689|3495787|3808084|3825477|4040848|4102371|4146131|4499166|4645871|4799739|4987667|5929776|6374840|9091351|2960176|2960303|3330699).*/
              )
            ) {
              return true;
            }
          },
        ],
        activate
      );
    }
  }
}
